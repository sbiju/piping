{% extends 'base.html' %}
{% load static %}

{% load crispy_forms_tags %}

{% block head_title %}{% endblock %}


{% block content %}
<div class="row">
<div class="col-sm-12">

     <div class="table-responsive">
         <h3>ISO Based Material List</h3>
              <table class="table table-bordered">
                  <tr>
                  <th>Sl.No</th>
                  <th>ISO NO./ LINE NO.</th>
                  <th>Material</th>
                  <th>Size</th>
                  <th>Quantiy</th>
                  <th>Price</th>
                  <th>Total Price</th>
                  <th>Purchased</th>
                  <th>Fabricated</th>
                  <th>Issued</th>

                  </tr>
                  {% for item in mat_list %}
                  <tr>
                      <td>{{ forloop.counter }}</td>
                      <td>{{ item.iso.iso_no }}</td>
                      <td><a href="{% url 'detail' pk=item.pk %}">{{ item.name }}</a></td>
                      <td>{{ item.size }}"</td>
                      <td>{{ item.quantity }}</td>
                      {% if item.price %}
                      <td>{{ item.price }}</td>
                      {% else %}
                      <td>--</td>
                      {% endif %}
                      {% if item.total_price %}
                      <td>{{ item.total_price }}</td>
                      {% else %}
                      <td>--</td>
                      {% endif %}

                      <td>{% if not item.purchased %}Not Purchased {% else %}Purchased{% endif %}</td>
                      <td>{% if not item.fabricated %}Not Fabricated {% else %}Fabricated{% endif %}</td>
                      <td>{% if not item.issued %}Not Issued {% else %}Issued{% endif %}</td>
                  </tr>
                  {% endfor %}
              </table>


    </div>
</div>
</div>
<div class="row">
    <div class="col-sm-12">
         <div class="table-responsive">
             <h3>Joint Report</h3>
                  <table class="table table-bordered">
                      <tr>
                      <th>Sl.No</th>
                      <th>ISO NO./ LINE NO.</th>
                      <th>Joint No.</th>
                      <th>Size</th>
                      <th>Schedule</th>

                      <th>Welder Name</th>
                      <th>Fabricator Name</th>
                      <th>Time taken</th>
                      <th>Work Status</th>
                      <th>NDT Status</th>
                      <th>Report Date</th>

                      </tr>
                      {% for item in joint_report %}
                      <tr>
                          <td>{{ forloop.counter }}</td>
                          <td>{{ item.iso.iso_no }}</td>
                          <td>{{ item.joint_no }}</td>
                          <td>{{ item.size }}</td>
                          <td>{{ item.sch }}</td>

                          <td>{{ item.welder|title }}</td>
                          <td>{{ item.fabricator|title }}</td>
                          <td>{{ item.hours_worked }} hrs</td>
                          <td>{{ item.work_status }}</td>
                          <td>{{ item.ndt_status }}</td>
                          <td>{{ item.date_completed }}</td>
                      </tr>
                      {% endfor %}
                  </table>
        </div>

    </div>
</div>


{% endblock %}